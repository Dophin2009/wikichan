!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(1);(new(function(){function e(){this.wikic=new r.WikiApi}return e.prototype.prepare=function(){window.addEventListener("mousedown",this.onMouseOver.bind(this))},e.prototype.onMouseOver=function(e){for(var t=o.getSourceUnderCursor(e),n=[],r=0;r<4;r++)for(var i=0;i<4;i++)this.wikic.fetchExtract(t.phrase(r,i)).then(function(e){console.log(e),n.push(e)},function(e){console.log(e.stack)})},e}())).prepare()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.getSourceUnderCursor=function(e){var t=document.caretPositionFromPoint(e.clientX,e.clientY),n=t.offsetNode,o=t.offset;return new r.TextSource(n,o)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function s(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,s)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),u=n(4),s=function(){function e(){this.endpoint="https://en.wikipedia.org/w/api.php?"}return e.prototype.fetchExtract=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){return(t=new i.WikiApiQuery(this.endpoint)).addParam("action","query").addParam("prop","extracts&exintro&explaintext").addParam("redirects","1").addParam("origin","*").addParam("titles",e).addParam("format","json"),[2,new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.onloadend=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.responseText).query;if(-1!==Object.keys(t.pages).indexOf("-1")&&1===Object.keys(t.pages).length)return;var r=u.WikiApiResponse.fromJson(t);e(r)}else n({status:this.status,statusText:this.statusText})},r.onerror=function(){n({status:this.status,statusText:this.statusText})},r.send()})]})})},e}();t.WikiApi=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.endpoint=e,this.params=new Array}return e.prototype.addParam=function(e,t){var n=new o(e,t);return this.params.push(n),this},Object.defineProperty(e.prototype,"url",{get:function(){var e=this.endpoint;return this.params.forEach(function(t){e+=t.key+"="+t.value+"&"}),e},enumerable:!0,configurable:!0}),e}();t.WikiApiQuery=r;var o=function(){function e(e,t){this._key=e,this._value=t}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._redirects=[],this._pages=[]}return e.prototype.addRedirect=function(e){this._redirects.push(e)},e.prototype.addPage=function(e){this._pages.push(e)},Object.defineProperty(e.prototype,"redirects",{get:function(){return this._redirects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return this._pages},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return t.normalized&&t.normalized.forEach(function(e){n.addRedirect(i.fromJson(e))}),t.redirects&&t.redirects.forEach(function(e){n.addRedirect(i.fromJson(e))}),Object.keys(t.pages).forEach(function(e,r){+e<0||n.addPage(o.fromJson(t.pages[e]))}),n},e}();t.WikiApiResponse=r;var o=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summary",{get:function(){return this._summary},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return n._id=t.pageid,n._title=t.title,n._summary=t.extract,n},e}();t.WikiPage=o;var i=function(){function e(){}return Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return n._from=t.from,n._to=t.to,n},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._leftNode=e,this._rightNode=e,this._text=e.textContent,this._offset=t}return e.prototype.phrase=function(e,t){for(var n,r,o=this.offset,i=0;i<e+1;i++){for(;o>0&&(o--," "!==this.text[o]););o<0&&this.joinBefore()}n=o,o=this.offset;for(i=0;i<t+1;i++){for(;o<this.text.length&&(o++," "!==this.text[o]););o>this.text.length&&this.joinAfter()}return r=o,this.cleanString(this.text.substring(n,r).trim())},e.prototype.cleanString=function(e){return e.replace("/[.,/#!$%^&*;:{}=-_`~()]/g","")},e.prototype.joinAfter=function(){var e;this.rightNode=null===(e=this.rightNode).nextSibling?e.parentNode.nextSibling:e.nextSibling,this.addAfter(this.rightNode.textContent)},e.prototype.joinBefore=function(){var e;this.leftNode=null===(e=this.leftNode).previousSibling?e.parentNode.previousSibling:e.previousSibling,this.addBefore(this.leftNode.textContent)},e.prototype.addAfter=function(e){this.text+=e},e.prototype.addBefore=function(e){this.text=e+this.text,this.offset+=e.length},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftNode",{get:function(){return this._leftNode},set:function(e){this._leftNode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightNode",{get:function(){return this._rightNode},set:function(e){this._rightNode=e},enumerable:!0,configurable:!0}),e}();t.TextSource=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpa2ljaGFuLnRzIiwid2VicGFjazovLy8uL3NyYy9kb2MtYmluZC9tb3VzZS1iaW5kLnRzIiwid2VicGFjazovLy8uL3NyYy9hcGkvd2lraWFwaS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpL3F1ZXJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9hcGkvcmVzcG9uc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvYy1iaW5kL3RleHQtc291cmNlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwid2lraWFwaV8xIiwibW91c2VfYmluZF8xIiwiV2lraWNoYW4iLCJ0aGlzIiwid2lraWMiLCJXaWtpQXBpIiwicHJlcGFyZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlT3ZlciIsImUiLCJzb3VyY2UiLCJnZXRTb3VyY2VVbmRlckN1cnNvciIsInJlc3BvbnNlcyIsImJlZm9yZSIsImFmdGVyIiwiZmV0Y2hFeHRyYWN0IiwicGhyYXNlIiwidGhlbiIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwic3RhY2siLCJ0ZXh0X3NvdXJjZV8xIiwiZXZlbnQiLCJyYW5nZSIsImRvY3VtZW50IiwiY2FyZXRQb3NpdGlvbkZyb21Qb2ludCIsImNsaWVudFgiLCJjbGllbnRZIiwidGV4dE5vZGUiLCJvZmZzZXROb2RlIiwib2Zmc2V0IiwiVGV4dFNvdXJjZSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsInRocm93IiwicmV0dXJuIiwiaXRlcmF0b3IiLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJwb3AiLCJsZW5ndGgiLCJxdWVyeV8xIiwicmVzcG9uc2VfMSIsImVuZHBvaW50IiwiYXJ0aWNsZU5hbWUiLCJxdWVyeSIsIl9hIiwiV2lraUFwaVF1ZXJ5IiwiYWRkUGFyYW0iLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJ1cmwiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkZW5kIiwic3RhdHVzIiwianNvbiIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImtleXMiLCJwYWdlcyIsImluZGV4T2YiLCJyZXNwb25zZSIsIldpa2lBcGlSZXNwb25zZSIsImZyb21Kc29uIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJzZW5kIiwicGFyYW1zIiwiQXJyYXkiLCJwYXJhbSIsIldpa2lBcGlRdWVyeVBhcmFtcyIsImZvckVhY2giLCJjb25maWd1cmFibGUiLCJfa2V5IiwiX3ZhbHVlIiwic2V0IiwiX3JlZGlyZWN0cyIsIl9wYWdlcyIsImFkZFJlZGlyZWN0IiwiYWRkUGFnZSIsIm5vcm1hbGl6ZWQiLCJSZWRpcmVjdCIsInJlZGlyZWN0cyIsImsiLCJXaWtpUGFnZSIsIl9pZCIsIl90aXRsZSIsIl9zdW1tYXJ5IiwicGFnZWlkIiwidGl0bGUiLCJleHRyYWN0IiwiX2Zyb20iLCJfdG8iLCJmcm9tIiwidG8iLCJub2RlIiwiX2xlZnROb2RlIiwiX3JpZ2h0Tm9kZSIsIl90ZXh0IiwidGV4dENvbnRlbnQiLCJfb2Zmc2V0IiwiYmVnaW4iLCJlbmQiLCJ0ZXh0Iiwiam9pbkJlZm9yZSIsImpvaW5BZnRlciIsImNsZWFuU3RyaW5nIiwic3Vic3RyaW5nIiwidHJpbSIsInJlcGxhY2UiLCJyaWdodE5vZGUiLCJuZXh0U2libGluZyIsInBhcmVudE5vZGUiLCJhZGRBZnRlciIsImxlZnROb2RlIiwicHJldmlvdXNTaWJsaW5nIiwiYWRkQmVmb3JlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFB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UUFEQW5CLEVBeERBMUgsS0FBQTZJLFVBeURBQyxnQkFBQXBCLEVBQUFpQixXQUFBRyxnQkFBQXBCLEVBQUFvQixnQkF4REE5SSxLQUFBK0ksVUFBQS9JLEtBQUE2SSxTQUFBZixjQUVBL0YsRUFBQXRDLFVBQUFtSixTQUFBLFNBQUFWLEdBQ0FsSSxLQUFBa0ksU0FFQW5HLEVBQUF0QyxVQUFBc0osVUFBQSxTQUFBYixHQUNBbEksS0FBQWtJLE9BQUFsSSxLQUFBa0ksS0FDQWxJLEtBQUE4QixRQUFBb0csRUFBQWpFLFFBRUExRixPQUFBQyxlQUFBdUQsRUFBQXRDLFVBQUEsUUFDQWYsSUFBQSxXQUNBLE9BQUFzQixLQUFBNkgsT0FFQXZCLElBQUEsU0FBQXhILEdBQ0FrQixLQUFBNkgsTUFBQS9JLEdBRUFMLFlBQUEsRUFDQTBILGNBQUEsSUFFQTVILE9BQUFDLGVBQUF1RCxFQUFBdEMsVUFBQSxVQUNBZixJQUFBLFdBQ0EsT0FBQXNCLEtBQUErSCxTQUVBekIsSUFBQSxTQUFBeEgsR0FDQWtCLEtBQUErSCxRQUFBakosR0FFQUwsWUFBQSxFQUNBMEgsY0FBQSxJQUVBNUgsT0FBQUMsZUFBQXVELEVBQUF0QyxVQUFBLFlBQ0FmLElBQUEsV0FDQSxPQUFBc0IsS0FBQTJILFdBRUFyQixJQUFBLFNBQUF4SCxHQUNBa0IsS0FBQTJILFVBQUE3SSxHQUVBTCxZQUFBLEVBQ0EwSCxjQUFBLElBRUE1SCxPQUFBQyxlQUFBdUQsRUFBQXRDLFVBQUEsYUFDQWYsSUFBQSxXQUNBLE9BQUFzQixLQUFBNEgsWUFFQXRCLElBQUEsU0FBQXhILEdBQ0FrQixLQUFBNEgsV0FBQTlJLEdBRUFMLFlBQUEsRUFDQTBILGNBQUEsSUFFQXBFLEVBOUZBLEdBZ0dBcEUsRUFBQW9FIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB3aWtpYXBpXzEgPSByZXF1aXJlKFwiLi9hcGkvd2lraWFwaVwiKTtcclxudmFyIG1vdXNlX2JpbmRfMSA9IHJlcXVpcmUoXCIuL2RvYy1iaW5kL21vdXNlLWJpbmRcIik7XHJcbnZhciBXaWtpY2hhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpa2ljaGFuKCkge1xyXG4gICAgICAgIHRoaXMud2lraWMgPSBuZXcgd2lraWFwaV8xLldpa2lBcGkoKTtcclxuICAgIH1cclxuICAgIFdpa2ljaGFuLnByb3RvdHlwZS5wcmVwYXJlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VPdmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vd2luZG93Lndpa2lmcmFtZSA9IG5ldyBSZXNwb25zZURpc3BsYXkoMCwgMCwgMCwgMCk7XHJcbiAgICB9O1xyXG4gICAgV2lraWNoYW4ucHJvdG90eXBlLm9uTW91c2VPdmVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc291cmNlID0gbW91c2VfYmluZF8xLmdldFNvdXJjZVVuZGVyQ3Vyc29yKGUpO1xyXG4gICAgICAgIHZhciByZXNwb25zZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBiZWZvcmUgPSAwOyBiZWZvcmUgPCA0OyBiZWZvcmUrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBhZnRlciA9IDA7IGFmdGVyIDwgNDsgYWZ0ZXIrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aWtpYy5mZXRjaEV4dHJhY3Qoc291cmNlLnBocmFzZShiZWZvcmUsIGFmdGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZXMucHVzaChyZXMpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBXaWtpY2hhbjtcclxufSgpKTtcclxudmFyIHdpa2ljaGFuID0gbmV3IFdpa2ljaGFuKCk7XHJcbndpa2ljaGFuLnByZXBhcmUoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRleHRfc291cmNlXzEgPSByZXF1aXJlKFwiLi90ZXh0LXNvdXJjZVwiKTtcclxuZnVuY3Rpb24gZ2V0U291cmNlVW5kZXJDdXJzb3IoZXZlbnQpIHtcclxuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XHJcbiAgICB2YXIgdGV4dE5vZGUgPSByYW5nZS5vZmZzZXROb2RlO1xyXG4gICAgdmFyIG9mZnNldCA9IHJhbmdlLm9mZnNldDtcclxuICAgIHZhciBzb3VyY2UgPSBuZXcgdGV4dF9zb3VyY2VfMS5UZXh0U291cmNlKHRleHROb2RlLCBvZmZzZXQpO1xyXG4gICAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5leHBvcnRzLmdldFNvdXJjZVVuZGVyQ3Vyc29yID0gZ2V0U291cmNlVW5kZXJDdXJzb3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHF1ZXJ5XzEgPSByZXF1aXJlKFwiLi9xdWVyeVwiKTtcclxudmFyIHJlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9yZXNwb25zZVwiKTtcclxudmFyIFdpa2lBcGkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpKCkge1xyXG4gICAgICAgIHRoaXMuZW5kcG9pbnQgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3cvYXBpLnBocD8nO1xyXG4gICAgfVxyXG4gICAgV2lraUFwaS5wcm90b3R5cGUuZmV0Y2hFeHRyYWN0ID0gZnVuY3Rpb24gKGFydGljbGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnk7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gbmV3IHF1ZXJ5XzEuV2lraUFwaVF1ZXJ5KHRoaXMuZW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgcXVlcnkuYWRkUGFyYW0oJ2FjdGlvbicsICdxdWVyeScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtKCdwcm9wJywgJ2V4dHJhY3RzJmV4aW50cm8mZXhwbGFpbnRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgncmVkaXJlY3RzJywgJzEnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgnb3JpZ2luJywgJyonKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgndGl0bGVzJywgYXJ0aWNsZU5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtKCdmb3JtYXQnLCAnanNvbicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgcXVlcnkudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KS5xdWVyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoanNvbi5wYWdlcykuaW5kZXhPZihcIi0xXCIpICE9PSAtMSAmJiBPYmplY3Qua2V5cyhqc29uLnBhZ2VzKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNwb25zZV8xLldpa2lBcGlSZXNwb25zZS5mcm9tSnNvbihqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpa2lBcGk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaSA9IFdpa2lBcGk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBXaWtpQXBpUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpUXVlcnkoZW5kcG9pbnQpIHtcclxuICAgICAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQ7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIFdpa2lBcGlRdWVyeS5wcm90b3R5cGUuYWRkUGFyYW0gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBwYXJhbSA9IG5ldyBXaWtpQXBpUXVlcnlQYXJhbXMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMucHVzaChwYXJhbSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lBcGlRdWVyeS5wcm90b3R5cGUsIFwidXJsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5lbmRwb2ludDtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnkgKz0gcC5rZXkgKyBcIj1cIiArIHAudmFsdWUgKyBcIiZcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaVF1ZXJ5ID0gV2lraUFwaVF1ZXJ5O1xyXG52YXIgV2lraUFwaVF1ZXJ5UGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2lraUFwaVF1ZXJ5UGFyYW1zKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcImtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXkgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnlQYXJhbXM7XHJcbn0oKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBXaWtpQXBpUmVzcG9uc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpUmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RzID0gW107XHJcbiAgICAgICAgdGhpcy5fcGFnZXMgPSBbXTtcclxuICAgIH1cclxuICAgIFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUuYWRkUmVkaXJlY3QgPSBmdW5jdGlvbiAocikge1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0cy5wdXNoKHIpO1xyXG4gICAgfTtcclxuICAgIFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUuYWRkUGFnZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnZXMucHVzaChwKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2lraUFwaVJlc3BvbnNlLnByb3RvdHlwZSwgXCJyZWRpcmVjdHNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVkaXJlY3RzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUsIFwicGFnZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBXaWtpQXBpUmVzcG9uc2UuZnJvbUpzb24gPSBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIHZhciByZXMgPSBuZXcgV2lraUFwaVJlc3BvbnNlKCk7XHJcbiAgICAgICAgaWYgKGpzb24ubm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICBqc29uLm5vcm1hbGl6ZWQuZm9yRWFjaChmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgcmVzLmFkZFJlZGlyZWN0KFJlZGlyZWN0LmZyb21Kc29uKG4pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChqc29uLnJlZGlyZWN0cykge1xyXG4gICAgICAgICAgICBqc29uLnJlZGlyZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuYWRkUmVkaXJlY3QoUmVkaXJlY3QuZnJvbUpzb24ocikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmtleXMoanNvbi5wYWdlcykuZm9yRWFjaChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBpZiAoK2sgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLmFkZFBhZ2UoV2lraVBhZ2UuZnJvbUpzb24oanNvbi5wYWdlc1trXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpa2lBcGlSZXNwb25zZTtcclxufSgpKTtcclxuZXhwb3J0cy5XaWtpQXBpUmVzcG9uc2UgPSBXaWtpQXBpUmVzcG9uc2U7XHJcbnZhciBXaWtpUGFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpa2lQYWdlKCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lQYWdlLnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpUGFnZS5wcm90b3R5cGUsIFwidGl0bGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2lraVBhZ2UucHJvdG90eXBlLCBcInN1bW1hcnlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VtbWFyeTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFdpa2lQYWdlLmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICB2YXIgcmVzID0gbmV3IFdpa2lQYWdlKCk7XHJcbiAgICAgICAgcmVzLl9pZCA9IGpzb24ucGFnZWlkO1xyXG4gICAgICAgIHJlcy5fdGl0bGUgPSBqc29uLnRpdGxlO1xyXG4gICAgICAgIHJlcy5fc3VtbWFyeSA9IGpzb24uZXh0cmFjdDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaWtpUGFnZTtcclxufSgpKTtcclxuZXhwb3J0cy5XaWtpUGFnZSA9IFdpa2lQYWdlO1xyXG52YXIgUmVkaXJlY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWRpcmVjdCgpIHtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWRpcmVjdC5wcm90b3R5cGUsIFwiZnJvbVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlZGlyZWN0LnByb3RvdHlwZSwgXCJ0b1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90bztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFJlZGlyZWN0LmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICB2YXIgcmVzID0gbmV3IFJlZGlyZWN0KCk7XHJcbiAgICAgICAgcmVzLl9mcm9tID0ganNvbi5mcm9tO1xyXG4gICAgICAgIHJlcy5fdG8gPSBqc29uLnRvO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlZGlyZWN0O1xyXG59KCkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVGV4dFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRleHRTb3VyY2Uobm9kZSwgb2Zmc2V0KSB7XHJcbiAgICAgICAgdGhpcy5fbGVmdE5vZGUgPSBub2RlO1xyXG4gICAgICAgIHRoaXMuX3JpZ2h0Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5fdGV4dCA9IG5vZGUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgfVxyXG4gICAgVGV4dFNvdXJjZS5wcm90b3R5cGUucGhyYXNlID0gZnVuY3Rpb24gKGJlZm9yZSwgYWZ0ZXIpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMub2Zmc2V0O1xyXG4gICAgICAgIHZhciBiZWdpbjtcclxuICAgICAgICB2YXIgZW5kO1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYmVmb3JlICsgMTsgaysrKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dFtpXSA9PT0gXCIgXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmpvaW5CZWZvcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBiZWdpbiA9IGk7XHJcbiAgICAgICAgaSA9IHRoaXMub2Zmc2V0O1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYWZ0ZXIgKyAxOyBrKyspIHtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0W2ldID09PSBcIiBcIilcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA+IHRoaXMudGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuam9pbkFmdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZW5kID0gaTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbGVhblN0cmluZyh0aGlzLnRleHQuc3Vic3RyaW5nKGJlZ2luLCBlbmQpLnRyaW0oKSk7XHJcbiAgICB9O1xyXG4gICAgVGV4dFNvdXJjZS5wcm90b3R5cGUuY2xlYW5TdHJpbmcgPSBmdW5jdGlvbiAocykge1xyXG4gICAgICAgIHJldHVybiBzLnJlcGxhY2UoXCIvWy4sXFwvIyEkJVxcXiZcXCo7Ont9PVxcLV9gfigpXS9nXCIsIFwiXCIpO1xyXG4gICAgfTtcclxuICAgIFRleHRTb3VyY2UucHJvdG90eXBlLmpvaW5BZnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJpZ2h0Tm9kZSA9IGdldE5leHROb2RlKHRoaXMucmlnaHROb2RlKTtcclxuICAgICAgICB0aGlzLmFkZEFmdGVyKHRoaXMucmlnaHROb2RlLnRleHRDb250ZW50KTtcclxuICAgIH07XHJcbiAgICBUZXh0U291cmNlLnByb3RvdHlwZS5qb2luQmVmb3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubGVmdE5vZGUgPSBnZXRQcmV2aW91c05vZGUodGhpcy5sZWZ0Tm9kZSk7XHJcbiAgICAgICAgdGhpcy5hZGRCZWZvcmUodGhpcy5sZWZ0Tm9kZS50ZXh0Q29udGVudCk7XHJcbiAgICB9O1xyXG4gICAgVGV4dFNvdXJjZS5wcm90b3R5cGUuYWRkQWZ0ZXIgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMudGV4dCArPSB0ZXh0O1xyXG4gICAgfTtcclxuICAgIFRleHRTb3VyY2UucHJvdG90eXBlLmFkZEJlZm9yZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dCArIHRoaXMudGV4dDtcclxuICAgICAgICB0aGlzLm9mZnNldCArPSB0ZXh0Lmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dFNvdXJjZS5wcm90b3R5cGUsIFwidGV4dFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dCA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRTb3VyY2UucHJvdG90eXBlLCBcIm9mZnNldFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0U291cmNlLnByb3RvdHlwZSwgXCJsZWZ0Tm9kZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sZWZ0Tm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xlZnROb2RlID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dFNvdXJjZS5wcm90b3R5cGUsIFwicmlnaHROb2RlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JpZ2h0Tm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0Tm9kZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFRleHRTb3VyY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVGV4dFNvdXJjZSA9IFRleHRTb3VyY2U7XHJcbmZ1bmN0aW9uIGdldE5leHROb2RlKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nID09PSBudWxsID8gbm9kZS5wYXJlbnROb2RlLm5leHRTaWJsaW5nIDogbm9kZS5uZXh0U2libGluZztcclxufVxyXG5mdW5jdGlvbiBnZXRQcmV2aW91c05vZGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBudWxsID8gbm9kZS5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZyA6IG5vZGUucHJldmlvdXNTaWJsaW5nO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=