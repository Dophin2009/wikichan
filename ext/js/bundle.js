!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(1);(new(function(){function e(){this.wikic=new r.WikiApi}return e.prototype.prepare=function(){window.addEventListener("mousedown",this.onMouseOver.bind(this))},e.prototype.onMouseOver=function(e){var t=o.getSourceUnderCursor(e);this.wikic.fetchExtract(t.phrase(0,0)).then(function(e){console.log(e)})},e}())).prepare()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.getSourceUnderCursor=function(e){var t=document.caretPositionFromPoint(e.clientX,e.clientY),n=t.offsetNode,o=t.offset;return new r.TextSource(n,o)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function s(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,s)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),u=n(4),s=function(){function e(){this.endpoint="https://en.wikipedia.org/w/api.php?"}return e.prototype.fetchExtract=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){return(t=new i.WikiApiQuery(this.endpoint)).addParam("action","query").addParam("prop","extracts&exintro&explaintext").addParam("redirects","1").addParam("origin","*").addParam("titles",e).addParam("format","json"),[2,new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.onloadend=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.responseText).query;if(-1!==Object.keys(t.pages).indexOf("-1")&&1===Object.keys(t.pages).length)return;var r=u.WikiApiResponse.fromJson(t);e(r)}else n({status:this.status,statusText:this.statusText})},r.onerror=function(){n({status:this.status,statusText:this.statusText})},r.send()})]})})},e}();t.WikiApi=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.endpoint=e,this.params=new Array}return e.prototype.addParam=function(e,t){var n=new o(e,t);return this.params.push(n),this},Object.defineProperty(e.prototype,"url",{get:function(){var e=this.endpoint;return this.params.forEach(function(t){e+=t.key+"="+t.value+"&"}),e},enumerable:!0,configurable:!0}),e}();t.WikiApiQuery=r;var o=function(){function e(e,t){this._key=e,this._value=t}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._redirects=[],this._pages=[]}return e.prototype.addRedirect=function(e){this._redirects.push(e)},e.prototype.addPage=function(e){this._pages.push(e)},Object.defineProperty(e.prototype,"redirects",{get:function(){return this._redirects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return this._pages},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return t.normalized&&t.normalized.forEach(function(e){n.addRedirect(i.fromJson(e))}),t.redirects&&t.redirects.forEach(function(e){n.addRedirect(i.fromJson(e))}),Object.keys(t.pages).forEach(function(e,r){+e<0||n.addPage(o.fromJson(t.pages[e]))}),n},e}();t.WikiApiResponse=r;var o=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summary",{get:function(){return this._summary},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return n._id=t.pageid,n._title=t.title,n._summary=t.extract,n},e}();t.WikiPage=o;var i=function(){function e(){}return Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),e.fromJson=function(t){var n=new e;return n._from=t.from,n._to=t.to,n},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._leftNode=e,this._rightNode=e,this._text=e.textContent,this._offset=t}return e.prototype.phrase=function(e,t){for(var n,r,o=this.offset,i=0;i<e+1;i++){for(;o>0&&(o--," "!==this.text[o]););0===o&&this.joinBefore()}n=o,o=this.offset;for(i=0;i<t+1;i++){for(;o<this.text.length&&(o++," "!==this.text[o]););o===this.text.length&&this.joinAfter()}return r=o,this.cleanString(this.text.substring(n,r).trim())},e.prototype.cleanString=function(e){return e.replace("/[.,/#!$%^&*;:{}=-_`~()]/g","")},e.prototype.joinAfter=function(){var e;this.rightNode=null===(e=this.rightNode).nextSibling?e.parentNode.nextSibling:e.nextSibling,this.addAfter(this.rightNode.textContent)},e.prototype.joinBefore=function(){var e;this.leftNode=null===(e=this.leftNode).previousSibling?e.parentNode.previousSibling:e.previousSibling,this.addBefore(this.leftNode.textContent)},e.prototype.addAfter=function(e){this.text+=e},e.prototype.addBefore=function(e){this.text=e+this.text,this.offset+=e.length},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftNode",{get:function(){return this._leftNode},set:function(e){this._leftNode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightNode",{get:function(){return this._rightNode},set:function(e){this._rightNode=e},enumerable:!0,configurable:!0}),e}();t.TextSource=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpa2ljaGFuLnRzIiwid2VicGFjazovLy8uL3NyYy9kb2MtYmluZC9tb3VzZS1iaW5kLnRzIiwid2VicGFjazovLy8uL3NyYy9hcGkvd2lraWFwaS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpL3F1ZXJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9hcGkvcmVzcG9uc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvYy1iaW5kL3RleHQtc291cmNlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwid2lraWFwaV8xIiwibW91c2VfYmluZF8xIiwiV2lraWNoYW4iLCJ0aGlzIiwid2lraWMiLCJXaWtpQXBpIiwicHJlcGFyZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlT3ZlciIsImUiLCJzb3VyY2UiLCJnZXRTb3VyY2VVbmRlckN1cnNvciIsImZldGNoRXh0cmFjdCIsInBocmFzZSIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwibG9nIiwidGV4dF9zb3VyY2VfMSIsImV2ZW50IiwicmFuZ2UiLCJkb2N1bWVudCIsImNhcmV0UG9zaXRpb25Gcm9tUG9pbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRleHROb2RlIiwib2Zmc2V0Tm9kZSIsIm9mZnNldCIsIlRleHRTb3VyY2UiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJ0aHJvdyIsInJldHVybiIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsInF1ZXJ5XzEiLCJyZXNwb25zZV8xIiwiZW5kcG9pbnQiLCJhcnRpY2xlTmFtZSIsInF1ZXJ5IiwiX2EiLCJXaWtpQXBpUXVlcnkiLCJhZGRQYXJhbSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInVybCIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWRlbmQiLCJzdGF0dXMiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwia2V5cyIsInBhZ2VzIiwiaW5kZXhPZiIsInJlc3BvbnNlIiwiV2lraUFwaVJlc3BvbnNlIiwiZnJvbUpzb24iLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsInNlbmQiLCJwYXJhbXMiLCJBcnJheSIsInBhcmFtIiwiV2lraUFwaVF1ZXJ5UGFyYW1zIiwiZm9yRWFjaCIsImNvbmZpZ3VyYWJsZSIsIl9rZXkiLCJfdmFsdWUiLCJzZXQiLCJfcmVkaXJlY3RzIiwiX3BhZ2VzIiwiYWRkUmVkaXJlY3QiLCJhZGRQYWdlIiwibm9ybWFsaXplZCIsIlJlZGlyZWN0IiwicmVkaXJlY3RzIiwiayIsIldpa2lQYWdlIiwiX2lkIiwiX3RpdGxlIiwiX3N1bW1hcnkiLCJwYWdlaWQiLCJ0aXRsZSIsImV4dHJhY3QiLCJfZnJvbSIsIl90byIsImZyb20iLCJ0byIsIm5vZGUiLCJfbGVmdE5vZGUiLCJfcmlnaHROb2RlIiwiX3RleHQiLCJ0ZXh0Q29udGVudCIsIl9vZmZzZXQiLCJiZWZvcmUiLCJhZnRlciIsImJlZ2luIiwiZW5kIiwidGV4dCIsImpvaW5CZWZvcmUiLCJqb2luQWZ0ZXIiLCJjbGVhblN0cmluZyIsInN1YnN0cmluZyIsInRyaW0iLCJyZXBsYWNlIiwicmlnaHROb2RlIiwibmV4dFNpYmxpbmciLCJwYXJlbnROb2RlIiwiYWRkQWZ0ZXIiLCJsZWZ0Tm9kZSIsInByZXZpb3VzU2libGluZyIsImFkZEJlZm9yZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVB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LFVBQUEsU0FBQWIsR0FDQWhJLEtBQUFnSSxPQUFBaEksS0FBQWdJLEtBQ0FoSSxLQUFBeUIsUUFBQXVHLEVBQUFwRSxRQUVBckYsT0FBQUMsZUFBQWtELEVBQUFqQyxVQUFBLFFBQ0FmLElBQUEsV0FDQSxPQUFBc0IsS0FBQXlILE9BRUF2QixJQUFBLFNBQUFwSCxHQUNBa0IsS0FBQXlILE1BQUEzSSxHQUVBTCxZQUFBLEVBQ0FzSCxjQUFBLElBRUF4SCxPQUFBQyxlQUFBa0QsRUFBQWpDLFVBQUEsVUFDQWYsSUFBQSxXQUNBLE9BQUFzQixLQUFBMkgsU0FFQXpCLElBQUEsU0FBQXBILEdBQ0FrQixLQUFBMkgsUUFBQTdJLEdBRUFMLFlBQUEsRUFDQXNILGNBQUEsSUFFQXhILE9BQUFDLGVBQUFrRCxFQUFBakMsVUFBQSxZQUNBZixJQUFBLFdBQ0EsT0FBQXNCLEtBQUF1SCxXQUVBckIsSUFBQSxTQUFBcEgsR0FDQWtCLEtBQUF1SCxVQUFBekksR0FFQUwsWUFBQSxFQUNBc0gsY0FBQSxJQUVBeEgsT0FBQUMsZUFBQWtELEVBQUFqQyxVQUFBLGFBQ0FmLElBQUEsV0FDQSxPQUFBc0IsS0FBQXdILFlBRUF0QixJQUFBLFNBQUFwSCxHQUNBa0IsS0FBQXdILFdBQUExSSxHQUVBTCxZQUFBLEVBQ0FzSCxjQUFBLElBRUFyRSxFQTlGQSxHQWdHQS9ELEVBQUErRCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgd2lraWFwaV8xID0gcmVxdWlyZShcIi4vYXBpL3dpa2lhcGlcIik7XHJcbnZhciBtb3VzZV9iaW5kXzEgPSByZXF1aXJlKFwiLi9kb2MtYmluZC9tb3VzZS1iaW5kXCIpO1xyXG52YXIgV2lraWNoYW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpY2hhbigpIHtcclxuICAgICAgICB0aGlzLndpa2ljID0gbmV3IHdpa2lhcGlfMS5XaWtpQXBpKCk7XHJcbiAgICB9XHJcbiAgICBXaWtpY2hhbi5wcm90b3R5cGUucHJlcGFyZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlT3Zlci5iaW5kKHRoaXMpKTtcclxuICAgIH07XHJcbiAgICBXaWtpY2hhbi5wcm90b3R5cGUub25Nb3VzZU92ZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBzb3VyY2UgPSBtb3VzZV9iaW5kXzEuZ2V0U291cmNlVW5kZXJDdXJzb3IoZSk7XHJcbiAgICAgICAgdGhpcy53aWtpYy5mZXRjaEV4dHJhY3Qoc291cmNlLnBocmFzZSgwLCAwKSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaWtpY2hhbjtcclxufSgpKTtcclxudmFyIHdpa2ljaGFuID0gbmV3IFdpa2ljaGFuKCk7XHJcbndpa2ljaGFuLnByZXBhcmUoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRleHRfc291cmNlXzEgPSByZXF1aXJlKFwiLi90ZXh0LXNvdXJjZVwiKTtcclxuZnVuY3Rpb24gZ2V0U291cmNlVW5kZXJDdXJzb3IoZXZlbnQpIHtcclxuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XHJcbiAgICB2YXIgdGV4dE5vZGUgPSByYW5nZS5vZmZzZXROb2RlO1xyXG4gICAgdmFyIG9mZnNldCA9IHJhbmdlLm9mZnNldDtcclxuICAgIHZhciBzb3VyY2UgPSBuZXcgdGV4dF9zb3VyY2VfMS5UZXh0U291cmNlKHRleHROb2RlLCBvZmZzZXQpO1xyXG4gICAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5leHBvcnRzLmdldFNvdXJjZVVuZGVyQ3Vyc29yID0gZ2V0U291cmNlVW5kZXJDdXJzb3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHF1ZXJ5XzEgPSByZXF1aXJlKFwiLi9xdWVyeVwiKTtcclxudmFyIHJlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9yZXNwb25zZVwiKTtcclxudmFyIFdpa2lBcGkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpKCkge1xyXG4gICAgICAgIHRoaXMuZW5kcG9pbnQgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3cvYXBpLnBocD8nO1xyXG4gICAgfVxyXG4gICAgV2lraUFwaS5wcm90b3R5cGUuZmV0Y2hFeHRyYWN0ID0gZnVuY3Rpb24gKGFydGljbGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnk7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gbmV3IHF1ZXJ5XzEuV2lraUFwaVF1ZXJ5KHRoaXMuZW5kcG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgcXVlcnkuYWRkUGFyYW0oJ2FjdGlvbicsICdxdWVyeScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtKCdwcm9wJywgJ2V4dHJhY3RzJmV4aW50cm8mZXhwbGFpbnRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgncmVkaXJlY3RzJywgJzEnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgnb3JpZ2luJywgJyonKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRQYXJhbSgndGl0bGVzJywgYXJ0aWNsZU5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtKCdmb3JtYXQnLCAnanNvbicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgcXVlcnkudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KS5xdWVyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoanNvbi5wYWdlcykuaW5kZXhPZihcIi0xXCIpICE9PSAtMSAmJiBPYmplY3Qua2V5cyhqc29uLnBhZ2VzKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNwb25zZV8xLldpa2lBcGlSZXNwb25zZS5mcm9tSnNvbihqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpa2lBcGk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaSA9IFdpa2lBcGk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBXaWtpQXBpUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpUXVlcnkoZW5kcG9pbnQpIHtcclxuICAgICAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQ7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIFdpa2lBcGlRdWVyeS5wcm90b3R5cGUuYWRkUGFyYW0gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBwYXJhbSA9IG5ldyBXaWtpQXBpUXVlcnlQYXJhbXMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMucHVzaChwYXJhbSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lBcGlRdWVyeS5wcm90b3R5cGUsIFwidXJsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5lbmRwb2ludDtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnkgKz0gcC5rZXkgKyBcIj1cIiArIHAudmFsdWUgKyBcIiZcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaVF1ZXJ5ID0gV2lraUFwaVF1ZXJ5O1xyXG52YXIgV2lraUFwaVF1ZXJ5UGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2lraUFwaVF1ZXJ5UGFyYW1zKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcImtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXkgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnlQYXJhbXM7XHJcbn0oKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBXaWtpQXBpUmVzcG9uc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXBpUmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RzID0gW107XHJcbiAgICAgICAgdGhpcy5fcGFnZXMgPSBbXTtcclxuICAgIH1cclxuICAgIFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUuYWRkUmVkaXJlY3QgPSBmdW5jdGlvbiAocikge1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0cy5wdXNoKHIpO1xyXG4gICAgfTtcclxuICAgIFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUuYWRkUGFnZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnZXMucHVzaChwKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2lraUFwaVJlc3BvbnNlLnByb3RvdHlwZSwgXCJyZWRpcmVjdHNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVkaXJlY3RzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lBcGlSZXNwb25zZS5wcm90b3R5cGUsIFwicGFnZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBXaWtpQXBpUmVzcG9uc2UuZnJvbUpzb24gPSBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIHZhciByZXMgPSBuZXcgV2lraUFwaVJlc3BvbnNlKCk7XHJcbiAgICAgICAgaWYgKGpzb24ubm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICBqc29uLm5vcm1hbGl6ZWQuZm9yRWFjaChmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgcmVzLmFkZFJlZGlyZWN0KFJlZGlyZWN0LmZyb21Kc29uKG4pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChqc29uLnJlZGlyZWN0cykge1xyXG4gICAgICAgICAgICBqc29uLnJlZGlyZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuYWRkUmVkaXJlY3QoUmVkaXJlY3QuZnJvbUpzb24ocikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmtleXMoanNvbi5wYWdlcykuZm9yRWFjaChmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICBpZiAoK2sgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLmFkZFBhZ2UoV2lraVBhZ2UuZnJvbUpzb24oanNvbi5wYWdlc1trXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpa2lBcGlSZXNwb25zZTtcclxufSgpKTtcclxuZXhwb3J0cy5XaWtpQXBpUmVzcG9uc2UgPSBXaWtpQXBpUmVzcG9uc2U7XHJcbnZhciBXaWtpUGFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpa2lQYWdlKCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdpa2lQYWdlLnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpUGFnZS5wcm90b3R5cGUsIFwidGl0bGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2lraVBhZ2UucHJvdG90eXBlLCBcInN1bW1hcnlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VtbWFyeTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFdpa2lQYWdlLmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICB2YXIgcmVzID0gbmV3IFdpa2lQYWdlKCk7XHJcbiAgICAgICAgcmVzLl9pZCA9IGpzb24ucGFnZWlkO1xyXG4gICAgICAgIHJlcy5fdGl0bGUgPSBqc29uLnRpdGxlO1xyXG4gICAgICAgIHJlcy5fc3VtbWFyeSA9IGpzb24uZXh0cmFjdDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaWtpUGFnZTtcclxufSgpKTtcclxuZXhwb3J0cy5XaWtpUGFnZSA9IFdpa2lQYWdlO1xyXG52YXIgUmVkaXJlY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWRpcmVjdCgpIHtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWRpcmVjdC5wcm90b3R5cGUsIFwiZnJvbVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlZGlyZWN0LnByb3RvdHlwZSwgXCJ0b1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90bztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFJlZGlyZWN0LmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICB2YXIgcmVzID0gbmV3IFJlZGlyZWN0KCk7XHJcbiAgICAgICAgcmVzLl9mcm9tID0ganNvbi5mcm9tO1xyXG4gICAgICAgIHJlcy5fdG8gPSBqc29uLnRvO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlZGlyZWN0O1xyXG59KCkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVGV4dFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRleHRTb3VyY2Uobm9kZSwgb2Zmc2V0KSB7XHJcbiAgICAgICAgdGhpcy5fbGVmdE5vZGUgPSBub2RlO1xyXG4gICAgICAgIHRoaXMuX3JpZ2h0Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5fdGV4dCA9IG5vZGUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgfVxyXG4gICAgVGV4dFNvdXJjZS5wcm90b3R5cGUucGhyYXNlID0gZnVuY3Rpb24gKGJlZm9yZSwgYWZ0ZXIpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMub2Zmc2V0O1xyXG4gICAgICAgIHZhciBiZWdpbjtcclxuICAgICAgICB2YXIgZW5kO1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYmVmb3JlICsgMTsgaysrKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dFtpXSA9PT0gXCIgXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuam9pbkJlZm9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJlZ2luID0gaTtcclxuICAgICAgICBpID0gdGhpcy5vZmZzZXQ7XHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhZnRlciArIDE7IGsrKykge1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IHRoaXMudGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHRbaV0gPT09IFwiIFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpID09PSB0aGlzLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmpvaW5BZnRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVuZCA9IGk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW5TdHJpbmcodGhpcy50ZXh0LnN1YnN0cmluZyhiZWdpbiwgZW5kKS50cmltKCkpO1xyXG4gICAgfTtcclxuICAgIFRleHRTb3VyY2UucHJvdG90eXBlLmNsZWFuU3RyaW5nID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICByZXR1cm4gcy5yZXBsYWNlKFwiL1suLFxcLyMhJCVcXF4mXFwqOzp7fT1cXC1fYH4oKV0vZ1wiLCBcIlwiKTtcclxuICAgIH07XHJcbiAgICBUZXh0U291cmNlLnByb3RvdHlwZS5qb2luQWZ0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yaWdodE5vZGUgPSBnZXROZXh0Tm9kZSh0aGlzLnJpZ2h0Tm9kZSk7XHJcbiAgICAgICAgdGhpcy5hZGRBZnRlcih0aGlzLnJpZ2h0Tm9kZS50ZXh0Q29udGVudCk7XHJcbiAgICB9O1xyXG4gICAgVGV4dFNvdXJjZS5wcm90b3R5cGUuam9pbkJlZm9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxlZnROb2RlID0gZ2V0UHJldmlvdXNOb2RlKHRoaXMubGVmdE5vZGUpO1xyXG4gICAgICAgIHRoaXMuYWRkQmVmb3JlKHRoaXMubGVmdE5vZGUudGV4dENvbnRlbnQpO1xyXG4gICAgfTtcclxuICAgIFRleHRTb3VyY2UucHJvdG90eXBlLmFkZEFmdGVyID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB0aGlzLnRleHQgKz0gdGV4dDtcclxuICAgIH07XHJcbiAgICBUZXh0U291cmNlLnByb3RvdHlwZS5hZGRCZWZvcmUgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQgKyB0aGlzLnRleHQ7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gdGV4dC5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRTb3VyY2UucHJvdG90eXBlLCBcInRleHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4dDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHQgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0U291cmNlLnByb3RvdHlwZSwgXCJvZmZzZXRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb2Zmc2V0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dFNvdXJjZS5wcm90b3R5cGUsIFwibGVmdE5vZGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGVmdE5vZGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sZWZ0Tm9kZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRTb3VyY2UucHJvdG90eXBlLCBcInJpZ2h0Tm9kZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yaWdodE5vZGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yaWdodE5vZGUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBUZXh0U291cmNlO1xyXG59KCkpO1xyXG5leHBvcnRzLlRleHRTb3VyY2UgPSBUZXh0U291cmNlO1xyXG5mdW5jdGlvbiBnZXROZXh0Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZyA9PT0gbnVsbCA/IG5vZGUucGFyZW50Tm9kZS5uZXh0U2libGluZyA6IG5vZGUubmV4dFNpYmxpbmc7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UHJldmlvdXNOb2RlKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlLnByZXZpb3VzU2libGluZyA9PT0gbnVsbCA/IG5vZGUucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcgOiBub2RlLnByZXZpb3VzU2libGluZztcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9