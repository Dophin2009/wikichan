!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);window.addEventListener("mousemove",r.onMouseMove),$(function(){$("p span").each(function(){var e=$(this),t=e.text();e.replaceWith(t)}),$("p").each(function(){var e=$(this),t=e.text().replace(/([\s])([^\s]+)/g,"$1<span>$2</span>");t=t.replace(/^([^\s]+)/g,"<span>$1</span>"),e.empty().append(t)}),$("h1").each(function(){var e=$(this),t=e.text().replace(/([\s])([^\s]+)/g,"$1<span>$2</span>");t=t.replace(/^([^\s]+)/g,"<span>$1</span>"),e.empty().append(t)})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(3),o=["lorem ipsum","anime"];function a(e,t,n){for(var r="",i=0;i<=n;i++){if(r=u(e,Math.max(t-n+i,0),Math.min(t+i+1,e.length)),-1!=o.indexOf(r))return r}return""}function u(e,t,n){for(var r="",i=t;i<n;i++)r+=e[i].innerText,r+=" ";return r.trim().toLowerCase()}t.onMouseMove=function(e){var t=new r.MousePoint(e.pageX,e.pageY),n=document.elementFromPoint(t.x,t.y);if("span"===n.tagName.toLowerCase()){for(var o,u=Array.prototype.slice.call(n.parentElement.children),s=u.indexOf(n),c=0;c<=4&&""==(o=a(u,s,c));c++);console.log(o),(new i.WikiApi).fetchArticle(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e}();t.MousePoint=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.WikiArticle=r;var i=function(){function e(e,t){this._key=e,this._value=t}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),e}();t.WikiApiQueryParams=i;var o=function(){function e(e){this.endpoint=e,this.params=new Array}return e.prototype.addParam=function(e,t){var n=new i(e,t);return this.params.push(n),this},e.prototype.build=function(){var e=this.endpoint;return this.params.forEach(function(t){e+=t.key+"="+t.value+"&"}),e},e}();t.WikiApiQuery=o;var a=function(){function e(){this.endpoint="https://en.wikipedia.org/w/api.php?",this.xhr=new XMLHttpRequest}return e.prototype.fetchArticle=function(e){var t=new o(this.endpoint);t.addParam("action","query").addParam("prop","extracts&exintro&explaintext").addParam("origin","*").addParam("titles",e).addParam("format","json"),this.xhr.open("GET",t.build()),this.xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"),this.xhr.onreadystatechange=function(){},this.xhr.send()},e}();t.WikiApi=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpa2ljaGFuLnRzIiwid2VicGFjazovLy8uL3NyYy9ob3Zlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW91c2Vwb2ludC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd2lraWFwaS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImhvdmVyXzEiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZU1vdmUiLCIkIiwiZWFjaCIsIiR0aGlzIiwidGhpcyIsInRleHQiLCJyZXBsYWNlV2l0aCIsIm5ld1RleHQiLCJyZXBsYWNlIiwiZW1wdHkiLCJhcHBlbmQiLCJtb3VzZXBvaW50XzEiLCJ3aWtpYXBpXzEiLCJGQUtFX0RBVEEiLCJmaW5kU2VhcmNoIiwic3BhbnMiLCJpbmRleCIsImxlbmd0aCIsInNlYXJjaCIsImNvbnN0cnVjdFNlYXJjaCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJpbmRleE9mIiwic3RhcnQiLCJlbmQiLCJpbm5lclRleHQiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJlIiwibW91c2VQb3NpdGlvbiIsIk1vdXNlUG9pbnQiLCJwYWdlWCIsInBhZ2VZIiwiZWxlbSIsImRvY3VtZW50IiwiZWxlbWVudEZyb21Qb2ludCIsIngiLCJ5IiwidGFnTmFtZSIsInJlc3VsdCIsInNpYmxpbmdzIiwiQXJyYXkiLCJzbGljZSIsInBhcmVudEVsZW1lbnQiLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJsb2ciLCJXaWtpQXBpIiwiZmV0Y2hBcnRpY2xlIiwiX3giLCJfeSIsImNvbmZpZ3VyYWJsZSIsIldpa2lBcnRpY2xlIiwiV2lraUFwaVF1ZXJ5UGFyYW1zIiwiX2tleSIsIl92YWx1ZSIsInNldCIsIldpa2lBcGlRdWVyeSIsImVuZHBvaW50IiwicGFyYW1zIiwiYWRkUGFyYW0iLCJwYXJhbSIsInB1c2giLCJidWlsZCIsInF1ZXJ5IiwiZm9yRWFjaCIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiYXJ0aWNsZU5hbWUiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxL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QUF3RCxPQUFBLElBQUFsQixNQWNBLE9BWkFnQixFQUFBakUsVUFBQW9FLFNBQUEsU0FBQXpFLEVBQUFOLEdBQ0EsSUFBQWdGLEVBQUEsSUFBQVIsRUFBQWxFLEVBQUFOLEdBRUEsT0FEQXNCLEtBQUF3RCxPQUFBRyxLQUFBRCxHQUNBMUQsTUFFQXNELEVBQUFqRSxVQUFBdUUsTUFBQSxXQUNBLElBQUFDLEVBQUE3RCxLQUFBdUQsU0FJQSxPQUhBdkQsS0FBQXdELE9BQUFNLFFBQUEsU0FBQXZFLEdBQ0FzRSxHQUFBdEUsRUFBQVAsSUFBQSxJQUFBTyxFQUFBYixNQUFBLE1BRUFtRixHQUVBUCxFQWpCQSxHQW1CQS9GLEVBQUErRixlQUNBLElBQUFWLEVBQUEsV0FDQSxTQUFBQSxJQUNBNUMsS0FBQXVELFNBQUEsc0NBQ0F2RCxLQUFBK0QsSUFBQSxJQUFBQyxlQWdCQSxPQWRBcEIsRUFBQXZELFVBQUF3RCxhQUFBLFNBQUFvQixHQUNBLElBQUFKLEVBQUEsSUFBQVAsRUFBQXRELEtBQUF1RCxVQUNBTSxFQUFBSixTQUFBLGtCQUNBQSxTQUFBLHVDQUNBQSxTQUFBLGNBQ0FBLFNBQUEsU0FBQVEsR0FDQVIsU0FBQSxpQkFDQXpELEtBQUErRCxJQUFBRyxLQUFBLE1BQUFMLEVBQUFELFNBQ0E1RCxLQUFBK0QsSUFBQUksaUJBQUEsa0RBQ0FuRSxLQUFBK0QsSUFBQUssbUJBQUEsYUFHQXBFLEtBQUErRCxJQUFBTSxRQUVBekIsRUFuQkEsR0FxQkFyRixFQUFBcUYiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGhvdmVyXzEgPSByZXF1aXJlKFwiLi9ob3ZlclwiKTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaG92ZXJfMS5vbk1vdXNlTW92ZSk7XHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgJChcInAgc3BhblwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ZXh0ID0gJHRoaXMudGV4dCgpO1xyXG4gICAgICAgICR0aGlzLnJlcGxhY2VXaXRoKHRleHQpO1xyXG4gICAgfSk7XHJcbiAgICAkKFwicFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBuZXdUZXh0ID0gJHRoaXMudGV4dCgpLnJlcGxhY2UoLyhbXFxzXSkoW15cXHNdKykvZywgXCIkMTxzcGFuPiQyPC9zcGFuPlwiKTtcclxuICAgICAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKC9eKFteXFxzXSspL2csIFwiPHNwYW4+JDE8L3NwYW4+XCIpO1xyXG4gICAgICAgICR0aGlzLmVtcHR5KCkuYXBwZW5kKG5ld1RleHQpO1xyXG4gICAgfSk7XHJcbiAgICByZXBsYWNlKFwiaDFcIik7XHJcbn0pO1xyXG5mdW5jdGlvbiByZXBsYWNlKHRhZykge1xyXG4gICAgJCh0YWcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIG5ld1RleHQgPSAkdGhpcy50ZXh0KCkucmVwbGFjZSgvKFtcXHNdKShbXlxcc10rKS9nLCBcIiQxPHNwYW4+JDI8L3NwYW4+XCIpO1xyXG4gICAgICAgIG5ld1RleHQgPSBuZXdUZXh0LnJlcGxhY2UoL14oW15cXHNdKykvZywgXCI8c3Bhbj4kMTwvc3Bhbj5cIik7XHJcbiAgICAgICAgJHRoaXMuZW1wdHkoKS5hcHBlbmQobmV3VGV4dCk7XHJcbiAgICB9KTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgbW91c2Vwb2ludF8xID0gcmVxdWlyZShcIi4vbW91c2Vwb2ludFwiKTtcclxudmFyIHdpa2lhcGlfMSA9IHJlcXVpcmUoXCIuL3dpa2lhcGlcIik7XHJcbnZhciBGQUtFX0RBVEEgPSBbJ2xvcmVtIGlwc3VtJywgJ2FuaW1lJ107XHJcbmZ1bmN0aW9uIG9uTW91c2VNb3ZlKGUpIHtcclxuICAgIHZhciBtb3VzZVBvc2l0aW9uID0gbmV3IG1vdXNlcG9pbnRfMS5Nb3VzZVBvaW50KGUucGFnZVgsIGUucGFnZVkpO1xyXG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KG1vdXNlUG9zaXRpb24ueCwgbW91c2VQb3NpdGlvbi55KTtcclxuICAgIGlmIChlbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3NwYW4nKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy9lbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2UwZTJlMlwiO1xyXG4gICAgdmFyIHNpYmxpbmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbS5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKTtcclxuICAgIHZhciBpbmRleCA9IHNpYmxpbmdzLmluZGV4T2YoZWxlbSk7XHJcbiAgICB2YXIgcmVzdWx0O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gNDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gZmluZFNlYXJjaChzaWJsaW5ncywgaW5kZXgsIGkpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgbmV3IHdpa2lhcGlfMS5XaWtpQXBpKCkuZmV0Y2hBcnRpY2xlKHJlc3VsdCk7XHJcbn1cclxuZXhwb3J0cy5vbk1vdXNlTW92ZSA9IG9uTW91c2VNb3ZlO1xyXG5mdW5jdGlvbiBmaW5kU2VhcmNoKHNwYW5zLCBpbmRleCwgbGVuZ3RoKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gXCJcIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5tYXgoaW5kZXggLSBsZW5ndGggKyBpLCAwKTtcclxuICAgICAgICB2YXIgZW5kID0gTWF0aC5taW4oaW5kZXggKyBpICsgMSwgc3BhbnMubGVuZ3RoKTtcclxuICAgICAgICBzZWFyY2ggPSBjb25zdHJ1Y3RTZWFyY2goc3BhbnMsIHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgIGlmIChGQUtFX0RBVEEuaW5kZXhPZihzZWFyY2gpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWFyY2g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbn1cclxuZnVuY3Rpb24gY29uc3RydWN0U2VhcmNoKHNwYW5zLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgc2VhcmNoID0gXCJcIjtcclxuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XHJcbiAgICAgICAgc2VhcmNoICs9IHNwYW5zW2ldLmlubmVyVGV4dDtcclxuICAgICAgICBzZWFyY2ggKz0gXCIgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VhcmNoLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBNb3VzZVBvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTW91c2VQb2ludCh4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5feCA9IHg7XHJcbiAgICAgICAgdGhpcy5feSA9IHk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTW91c2VQb2ludC5wcm90b3R5cGUsIFwieFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl94O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vdXNlUG9pbnQucHJvdG90eXBlLCBcInlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5feTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBNb3VzZVBvaW50O1xyXG59KCkpO1xyXG5leHBvcnRzLk1vdXNlUG9pbnQgPSBNb3VzZVBvaW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgV2lraUFydGljbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXaWtpQXJ0aWNsZSgpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBXaWtpQXJ0aWNsZTtcclxufSgpKTtcclxuZXhwb3J0cy5XaWtpQXJ0aWNsZSA9IFdpa2lBcnRpY2xlO1xyXG52YXIgV2lraUFwaVF1ZXJ5UGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2lraUFwaVF1ZXJ5UGFyYW1zKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcImtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXkgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXaWtpQXBpUXVlcnlQYXJhbXMucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnlQYXJhbXM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaVF1ZXJ5UGFyYW1zID0gV2lraUFwaVF1ZXJ5UGFyYW1zO1xyXG52YXIgV2lraUFwaVF1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2lraUFwaVF1ZXJ5KGVuZHBvaW50KSB7XHJcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gbmV3IEFycmF5KCk7XHJcbiAgICB9XHJcbiAgICBXaWtpQXBpUXVlcnkucHJvdG90eXBlLmFkZFBhcmFtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcGFyYW0gPSBuZXcgV2lraUFwaVF1ZXJ5UGFyYW1zKGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMucGFyYW1zLnB1c2gocGFyYW0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFdpa2lBcGlRdWVyeS5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5lbmRwb2ludDtcclxuICAgICAgICB0aGlzLnBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5ICs9IHAua2V5ICsgXCI9XCIgKyBwLnZhbHVlICsgXCImXCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaWtpQXBpUXVlcnk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaVF1ZXJ5ID0gV2lraUFwaVF1ZXJ5O1xyXG52YXIgV2lraUFwaSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpa2lBcGkoKSB7XHJcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9ICdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvdy9hcGkucGhwPyc7XHJcbiAgICAgICAgdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIH1cclxuICAgIFdpa2lBcGkucHJvdG90eXBlLmZldGNoQXJ0aWNsZSA9IGZ1bmN0aW9uIChhcnRpY2xlTmFtZSkge1xyXG4gICAgICAgIHZhciBxdWVyeSA9IG5ldyBXaWtpQXBpUXVlcnkodGhpcy5lbmRwb2ludCk7XHJcbiAgICAgICAgcXVlcnkuYWRkUGFyYW0oJ2FjdGlvbicsICdxdWVyeScpXHJcbiAgICAgICAgICAgIC5hZGRQYXJhbSgncHJvcCcsICdleHRyYWN0cyZleGludHJvJmV4cGxhaW50ZXh0JylcclxuICAgICAgICAgICAgLmFkZFBhcmFtKCdvcmlnaW4nLCAnKicpXHJcbiAgICAgICAgICAgIC5hZGRQYXJhbSgndGl0bGVzJywgYXJ0aWNsZU5hbWUpXHJcbiAgICAgICAgICAgIC5hZGRQYXJhbSgnZm9ybWF0JywgJ2pzb24nKTtcclxuICAgICAgICB0aGlzLnhoci5vcGVuKCdHRVQnLCBxdWVyeS5idWlsZCgpKTtcclxuICAgICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcpO1xyXG4gICAgICAgIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnhoci5zZW5kKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpa2lBcGk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuV2lraUFwaSA9IFdpa2lBcGk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=